{{define "body"}}
<h2> {{if eq "public" (.type)}}
    Public Timeline
  {{ else if eq "user" (.type) }}
    {{ .Username }}'s Timeline
  {{ else }}
    My Timeline
  {{ end }}</h2>
  {{ if .loggedin }}
    {{ if eq "user" .type }}
      <div class=followstatus>
      {{ if eq  .sess_u_id .profileuser.userId }}
        This is you!
      {{ else if .followed }}
        You are currently following this user.
        <a class=unfollow href="/{{.profileuser.username}}/unfollow
          ">Unfollow user</a>.
      {{else }}
        You are not yet following this user.
        <a class=follow href="/{{.profileuser.username}}/follow">Follow user</a>.
      {{end}}
      </div>
    {{else if eq "default" .type }}
      <div class=twitbox>
        <h3>What's on your mind {{ .username }}?</h3>
        <form action="/add_message" method=post>
          <p><input type=text name=text size=60>
            <input type=submit value="Share">
        </form>
      </div>
    {{end}}
    {{else}}
    <div class=twitbox>
        <h3>What's on your mind?</h3>
        <form method=post>
          <p><input type=text name=text size=60>
            <input type=submit value="Share">
        </form>
      </div>
    <ul class=messages>
  {{end}}
    {{if eq 0 (len .timeline)}}
        <li><em>There's no message so far.</em></li>
    {{else}}
          {{ range .timeline }}
          <!--TODO: figure out how to call "gravatar_url" with email-->
          <li><img src=""><p>
            <strong><a href="">{{ .Username }}</a></strong>
            {{.Text}}
            <!--TODO: figure out how to call "format_datetime" with the pubdate-->
            <small>&mdash; {{ .PubDate }}</small> 
          </li>
          {{end}}
    {{end}}
</ul>
{{end}}
